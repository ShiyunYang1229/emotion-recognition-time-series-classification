<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Required Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- Page Title -->
    <title>Result</title>

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/images/logo/favicon.png" type="image/x-icon">

    <!-- CSS Files -->
    <link rel="stylesheet" href="assets/css/animate-3.7.0.css">
    <link rel="stylesheet" href="assets/css/font-awesome-4.7.0.min.css">
    <link rel="stylesheet" href="assets/fonts/flat-icon/flaticon.css">
    <link rel="stylesheet" href="assets/css/bootstrap-4.1.3.min.css">
    <link rel="stylesheet" href="assets/css/owl-carousel.min.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <!-- Preloader Starts -->
    <div class="preloader">
        <div class="spinner"></div>
    </div>
    <!-- Preloader End -->

    <!-- Header Area Starts -->
    <header class="header-area single-page">
        <div class="header-top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-2">
                        <div class="logo-area">
                            <a href="/index"><img src="assets/images/logo-light.png" alt="logo"></a>
                        </div>
                    </div>
                    <div class="col-lg-10">
                        <div class="custom-navbar">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <div class="main-menu main-menu-light">
                            <ul>
                                <li class="active"><a href="/index">home</a></li>
                                <li><a href="/introduction">introduction</a></li>
                                <li><a href="/test">test</a></li>
                                <li><a href="#">videos</a>
                                    <ul class="sub-menu">
                                        <li><a href="/fun-clips">fun-clips</a></li>
                                        <li><a href="/sad-scenes">sad-scenes</a></li>
                                    </ul>
                                </li>
                                {% if current_user.is_anonymous %}
                                <li class="menu-btn">
                                    <a href="/login" class="login">log in</a>
                                    <a href="/register" class="template-btn">sign up</a>
                                </li>
                                {% else %}
                                <li class="menu-btn">
                                    <a href="/profile" class="template-btn">profile</a>
                                    <a href="/logout" class="logout">log out</a>
                                </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="page-title text-center">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 offset-md-3">
                        <h2>Test Result</h2>
                        <p>As shown.</p>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Header Area End -->


    <!-- Jobs Area Starts -->
    <!--<br>padding for section-->
    <!--<section class="jobs-area section-padding">-->
    <section class="jobs-area">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="single-job mb-4 d-lg-flex justify-content-between">
                        <div class="job-text">
                            <h4>Test Result</h4>
                            <ul class="mt-4">
                                <li class="mb-3"><h5><i class="fa fa-stethoscope"></i> Voted Test Score : {{ res["vote0"][0] }}%,  {{ res["name"] }} is {{ res["vote0"][2] }}!</h5></li>
                                <li><h5><i class="fa fa-clock-o"></i> Test Time : {{ res["time"] }}</h5></li>
                            </ul>
                        </div>
                        <div class="job-img align-self-center">
                            <img src="#" alt="job" id="image0">
                        </div>
                        <div class="job-btn align-self-center">
                            <a href="#" onclick="location.href='/therapy?state='+vote[0];" class="third-btn job-btn1">Video Therapy</a>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Jobs Area End -->


    <!-- Job Single Content Starts -->
    <!--<br>padding for section-->
    <!--<section class="job-single-content section-padding">-->
    <section class="job-single-content">
        <div class="container">
            <div class="row">


                <div class="col-lg-7">
                    <div class="sidebar mt-5 mt-lg-0">
                        <div class="single-item mb-4">
                            <div id="att&med" style="width:600px;height:300px;"></div>
                        </div>
                        <div class="single-item mb-4">
                            <div id="delta" style="width:600px;height:300px;"></div>
                        </div>
                        <div class="single-item mb-4">
                            <div id="theta" style="width:600px;height:300px;"></div>
                        </div>
                        <div class="single-item mb-4">
                            <div id="alpha" style="width:600px;height:300px;"></div>
                        </div>
                        <div class="single-item mb-4">
                            <div id="beta" style="width:600px;height:300px;"></div>
                        </div>
                        <div class="single-item mb-4">
                            <div id="gamma" style="width:600px;height:300px;"></div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="main-content">
                        <div class="single-content1">
                            <div class="single-job mb-4 d-lg-flex justify-content-between">
                                <div class="job-text">
                                    <h4>Sub test no.1</h4>
                                    <ul class="mt-4">
                                        <li class="mb-3"><h5><i class="fa fa-pie-chart"></i> Test score: {{ res["vote1"][0] }}%  </h5></li>
                                        <li><h5><i class="fa fa-stethoscope"></i> {{ res["name"] }} is {{ res["vote1"][2] }}.</h5></li>
                                    </ul>
                                </div>
                                <div class="job-img align-self-center">
                                    <img src="#" alt="job" id="image1">
                                </div>
                            </div>

                            <div class="single-job mb-4 d-lg-flex justify-content-between">
                                <div class="job-text">
                                    <h4>Sub test no.2</h4>
                                    <ul class="mt-4">
                                        <li class="mb-3"><h5><i class="fa fa-pie-chart"></i> Test score: {{ res["vote2"][0] }}%  </h5></li>
                                        <li><h5><i class="fa fa-stethoscope"></i> {{ res["name"] }} is {{ res["vote2"][2] }}.</h5></li>
                                    </ul>
                                </div>
                                <div class="job-img align-self-center">
                                    <img src="#" alt="job" id="image2">
                                </div>
                            </div>

                            <div class="single-job mb-4 d-lg-flex justify-content-between">
                                <div class="job-text">
                                    <h4>Sub test no.3</h4>
                                    <ul class="mt-4">
                                        <li class="mb-3"><h5><i class="fa fa-pie-chart"></i> Test score: {{ res["vote3"][0] }}%  </h5></li>
                                        <li><h5><i class="fa fa-stethoscope"></i> {{ res["name"] }} is {{ res["vote3"][2] }}.</h5></li>
                                    </ul>
                                </div>
                                <div class="job-img align-self-center">
                                    <img src="#" alt="job" id="image3">
                                </div>
                            </div>

                            <div class="single-job mb-4 d-lg-flex justify-content-between">
                                <div class="job-text">
                                    <h4>Sub test no.4</h4>
                                    <ul class="mt-4">
                                        <li class="mb-3"><h5><i class="fa fa-pie-chart"></i> Test score: {{ res["vote4"][0] }}%  </h5></li>
                                        <li><h5><i class="fa fa-stethoscope"></i> {{ res["name"] }} is {{ res["vote4"][2] }}.</h5></li>
                                    </ul>
                                </div>
                                <div class="job-img align-self-center">
                                    <img src="#" alt="job" id="image4">
                                </div>
                            </div>

                            <div class="single-job mb-4 d-lg-flex justify-content-between">
                                <div class="job-text">
                                    <h4>Sub test no.5</h4>
                                    <ul class="mt-4">
                                        <li class="mb-3"><h5><i class="fa fa-pie-chart"></i> Test score: {{ res["vote5"][0] }}%  </h5></li>
                                        <li><h5><i class="fa fa-stethoscope"></i> {{ res["name"] }} is {{ res["vote5"][2] }}.</h5></li>
                                    </ul>
                                </div>
                                <div class="job-img align-self-center">
                                    <img src="#" alt="job" id="image5">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                <div class="more-job-btn mt-5 text-center">
                    <a href="/test" class="template-btn">Test Again!</a>
                </div>
        </div>
    </section>
    <!-- Job Single Content End -->



    <script type="text/javascript">
        var res = {{ res|tojson }};
        var vote = [0, 0, 0, 0, 0, 0]
        for(var i=0; i<=5; i++) {
            vote[i] = res["vote"+i][1]
            document.getElementById('image'+i).src = "assets/images/mood" + (6- Number(vote[i])) + ".png";
        }
        document.getElementById('image0').src = "assets/images/mood_big" + (6- Number(vote[0])) + ".png";

        //TESTER = document.getElementById('tester');
        //Plotly.plot( TESTER, [{
        //x: res["feat_time"],
        //y: res["feat_0"] }], {
        //margin: { t: 0 } } );

        var trace_att = {
          x: res["index"],
          y: res["attention"],
          mode: 'lines+markers',
          name: 'attention',
          connectgaps: true
        };

        var trace_med = {
          x: res["index"],
          y: res["meditation"],
          mode: 'lines+markers',
          name: 'meditation',
          connectgaps: true
        };

        var trace1 = {
          x: res["index"],
          y: res["delta"],
          mode: 'lines+markers',
          name: 'delta',
          connectgaps: true
        };

        var trace2 = {
          x: res["index"],
          y: res["theta"],
          mode: 'lines+markers',
          name: 'theta',
          connectgaps: true
        };

        var trace3 = {
          x: res["index"],
          y: res["lowAlpha"],
          mode: 'lines+markers',
          name: 'lowAlpha',
          connectgaps: true
        };

         var trace4 = {
          x: res["index"],
          y: res["highAlpha"],
          mode: 'lines+markers',
          name: 'highAlpha',
          connectgaps: true
        };

          var trace5 = {
          x: res["index"],
          y: res["lowBeta"],
          mode: 'lines+markers',
          name: 'lowBeta',
          connectgaps: true
        };

          var trace6 = {
          x: res["index"],
          y: res["highBeta"],
          mode: 'lines+markers',
          name: 'highBeta',
          connectgaps: true
        };

          var trace7 = {
          x: res["index"],
          y: res["lowGamma"],
          mode: 'lines+markers',
          name: 'lowGamma',
          connectgaps: true
        };

          var trace8 = {
          x: res["index"],
          y: res["highGamma"],
          mode: 'lines+markers',
          name: 'highGamma',
          connectgaps: true
        };
        var attention = [trace_att];
        var meditation = [trace_med];
        var att_med = [trace_att, trace_med];
        var brainwave = [trace1, trace2, trace3, trace4, trace5, trace6, trace7, trace8];
        var delta = [trace1]
        var theta = [trace2]
        var alpha = [trace3, trace4]
        var beta = [trace5, trace6]
        var gamma = [trace7, trace8]
        //var layout_att = {
        //  title: 'Attention',
        //  showlegend: true
        //};

        //var layout_med = {
        // title: 'Meditation',
        //  showlegend: true
        //};

        var layout_att_med = {
          title: 'Attention & Meditation',
          showlegend: true
        };

        //var layout_bw = {
        //  title: 'Eight bands Brain Wave',
        //  showlegend: true
        //};

        var layout_delta = {
          title: 'Delta Brain Wave',
          showlegend: true
        };
        var layout_theta = {
          title: 'Theta Brain Wave',
          showlegend: true
        };
        var layout_alpha = {
          title: 'Alpha Brain Waves',
          showlegend: true
        };
        var layout_beta = {
          title: 'Beta Brain Waves',
          showlegend: true
        };
        var layout_gamma = {
          title: 'Gamma Brain Waves',
          showlegend: true
        };

        //Plotly.newPlot('brainwave', brainwave, layout_bw, {showSendToCloud: true});
        Plotly.newPlot('att&med', att_med, layout_att_med, {showSendToCloud: true});
        Plotly.newPlot('delta', delta, layout_delta, {showSendToCloud: true});
        Plotly.newPlot('theta', theta, layout_theta, {showSendToCloud: true});
        Plotly.newPlot('alpha', alpha, layout_alpha, {showSendToCloud: true});
        Plotly.newPlot('beta', beta, layout_beta, {showSendToCloud: true});
        Plotly.newPlot('gamma', gamma, layout_gamma, {showSendToCloud: true});
    </script>
    <!-- Javascript -->
    <script src="assets/js/vendor/jquery-2.2.4.min.js"></script>
	<script src="assets/js/vendor/bootstrap-4.1.3.min.js"></script>
    <script src="assets/js/vendor/wow.min.js"></script>
    <script src="assets/js/vendor/owl-carousel.min.js"></script>
    <script src="assets/js/vendor/jquery.nice-select.min.js"></script>
    <script src="assets/js/vendor/ion.rangeSlider.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>
